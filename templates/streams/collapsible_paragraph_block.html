{% load wagtailcore_tags %}

<div class="collapsible-paragraph-block {% if self.collapsed %}collapsed{% endif %}">
  <div class="container">
    <div class="row d-block">
      <div class="col col-md-10 offset-md-1 col-lg-8 offset-lg-2">
        <div class="collapsible-header">
          {% if self.title_type == "h2" %}
          <h2 class="toggle-expand" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
            {{ self.title }}
            <button class="toggle-button" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
              <i class="fa fa-chevron-up"></i>
            </button>
          </h2>
          {% elif self.title_type == "h3" %}
          <h3 class="toggle-expand" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
            {{ self.title }}
            <button class="toggle-button" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
              <i class="fa fa-chevron-up"></i>
            </button>
          </h3>
          {% elif self.title_type == "h4" %}
          <h4 class="toggle-expand" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
            {{ self.title }}
            <button class="toggle-button" aria-expanded="{% if self.collapsed %}true{% else %}true{% endif %}">
              <i class="fa fa-chevron-up"></i>
            </button>
          </h4>
          {% endif %}

        </div>
        <div class="collapsible-content">
          {{ self.paragraph|richtext }}
        </div>
      </div>
    </div>
  </div>
</div>