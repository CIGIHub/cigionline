{% load events_form %}

<div class="cigi-field{% if field.errors %} has-errors{% endif %}">
  {% if field|is_conditional_toggle %}
    <div class="cigi-label">
      <span>
        {{ field.label }}
      </span>
      {% if field.field.required %}
        <span class="req">*</span>
      {% endif %}
    </div>
    {% if field.help_text %}
      <div class="cigi-help">{{ field.help_text|safe }}</div>
    {% endif %}

    <label class="cigi-checkbox cigi-checkbox--conditional">
      {{ field }}
      <span>
        {{ field.field.widget.attrs.data_conditional_checkbox_label|default:"Yes" }}
      </span>
    </label>
  {# single checkbox: label after input #}
  {% elif field|is_single_checkbox %}
    <div class="cigi-label">
      <span>{{ field.label }}{% if field.field.required %} <span class="req">*</span>{% endif %}</span>
    </div>
    {% if field.help_text %}
      <div class="cigi-help">{{ field.help_text|safe }}</div>
    {% endif %}
    <div class="cigi-options">
      <label class="cigi-checkbox">
        {{ field }}
      </label>
    </div>

  {# radio / checkbox groups #}
  {% elif field|is_choice_group %}
    <div class="cigi-label">
      <span>{{ field.label }}</span>{% if field.field.required %}<span class="req">*</span>{% endif %}
    </div>
    {% if field.help_text %}
      <div class="cigi-help">{{ field.help_text|safe }}</div>
    {% endif %}
    <div class="cigi-options">
      {% for sub in field %}
        <label class="cigi-option">
          {{ sub.tag }}
          <span>{{ sub.choice_label }}</span>
        </label>
      {% endfor %}
    </div>

  {# file input #}
  {% elif field|is_file %}
    <label class="cigi-label" for="{{ field.id_for_label }}">
      <span>{{ field.label }}</span>{% if field.field.required %}<span class="req">*</span>{% endif %}
    </label>
    {% if field.help_text %}
      <div class="cigi-help">{{ field.help_text|safe }}</div>
    {% endif %}
    <div class="cigi-file">
      {{ field }}
      <div class="file-meta" aria-live="polite"></div>
    </div>

  {# everything else (text, email, select, textarea, etc.) #}
  {% else %}
    <label class="cigi-label" for="{{ field.id_for_label }}">
      <span>{{ field.label }}</span>{% if field.field.required %}<span class="req">*</span>{% endif %}
    </label>
    {% if field.help_text %}
      <div class="cigi-help">{{ field.help_text|safe }}</div>
    {% endif %}
    {{ field }}
  {% endif %}

  {% if field.errors %}
    <ul class="cigi-errors">
      {% for e in field.errors %}
        <li>{{ e }}</li>
      {% endfor %}
    </ul>
  {% endif %}
</div>
