{% extends "wagtailadmin/base.html" %}
{% load i18n %}
{% block titletag %}{{ event.title }} — {% trans "Registration Capacity" %}{% endblock %}

{% block content %}
<header class="nice-padding registration-types-report-header">
  <div class="row">
    <div class="left">
      <h1 class="icon icon-date">{{ event.title }}</h1>
      <p class="help-block">
        {% trans "Capacity report by registration type." %}
      </p>
      <div class="registration-types-report-nav">
        <a href="{% url index_url_name %}" class="button bicolor button-small">{% trans "Back to Events" %}</a>
        <a href="{{ event.url }}" target="_blank" rel="noopener" class="button bicolor button-small">{% trans "View event" %}</a>
        <a class="button bicolor button-small" href="{% url export_csv_url_name pk=event.pk %}">
          Download CSV
        </a>
      </div>
    </div>
  </div>
</header>

<div class="nice-padding registration-report-detail-body">
  <table class="listing">
    <thead>
      <tr>
        <th>{% trans "Type" %}</th>
        <th class="w-min">{% trans "Slug" %}</th>
        <th class="w-min">{% trans "Capacity" %}</th>
        <th class="w-min">{% trans "Confirmed" %}</th>
        <th class="w-min">{% trans "Waitlisted" %}</th>
        <th class="w-min">{% trans "Remaining" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for r in type_rows %}
      <tr>
        <td>
          <a href="{% url type_url_name event.pk r.id %}">
            {{ r.name }}
          </a>
        </td>
        <td class="w-min"><code>{{ r.slug }}</code></td>
  <td class="w-min">{% if r.capacity is not None %}{{ r.capacity }}{% else %}—{% endif %}</td>
        <td class="w-min">{{ r.confirmed }}</td>
        <td class="w-min">{{ r.waitlisted }}</td>
        <td class="w-min">
          {% if r.remaining is not None %}{{ r.remaining }}{% else %}—{% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6">{% trans "No registration types found for this event." %}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}