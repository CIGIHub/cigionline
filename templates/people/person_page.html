{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags core_tags %}

{% block body_class %}person-page{% for person_type in page.person_types.all %} {{person_type|slugify|lower}}{% endfor %}{% endblock %}

{% block content %}
{% define page.expertise as expertises %}
{% define page.email as email %}
{% define page.twitter_username as twitter %}
{% define page.website as website %}
{% define page.linkedin_url as linkedin %}
{% define page.image_media as image_media %}
{% define page.phone_number as phone %}
{% define page.curriculum_vitae as cv %}
  
  <section class="hero">
    <div class="container-lg grid-container">
      <div class="content">
        <h1>{{page.title}}</h1>
        <div class="short-bio">
          {{page.short_bio|richtext}}
        </div>
      </div>
      {% if page.image_square %}
        <div class="portrait-circle">
          {% image page.image_square fill-140x140 %}
        </div>
      {% endif %}
    </div>
  </section>
  <section class="main container-sm">
    {% if not page.archive %}
      {% if expertises or email or twitter or website or linkedin or image_media or phone or cv %}
        <div class="expertise-section">
          {% if expertises %}
            <div class="meta">Expertise</div>
            <div class="meta">
              {% for expertise in expertises %}
                <span class="expertise-item">{{expertise}}</span>
              {% endfor %}
            </div>
          {% endif %}
          
          {% if email or twitter or website or linkedin or image_media or phone or cv %}
            <hr>
          {% endif %}

          <div class="contact">
            {% if phone %}
              <div class="contact-item">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  {{ phone }}
                </span>
              </div>
            {% endif %}

            {% if email %}
              <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <span>
                  <a href="mailto:{{ email }}">
                    {{ email }}
                  </a>
                </span>
              </div>
            {% endif %}

            {% if twitter %}
              <div class="contact-item">
                <i class="fab fa-twitter"></i>
                <span>
                  <a href="https://twitter.com/{{ twitter }}" target="_blank">
                    {{ twitter }}
                  </a>
                </span>
              </div>
            {% endif %}

            {% if linkedin %}
              <div class="contact-item">
                <i class="fab fa-linkedin-in"></i>
                <span>
                  <a href="{{ linkedin }}" target="_blank">{{ linkedin|no_protocol }}</a>
                </span>
              </div>
            {% endif %}

            {% if website %}
              <div class="contact-item">
                <i class="fas fa-link"></i>
                <span>
                  <a href="{{ website }}" target="_blank">{{ website|no_protocol }}</a>
                </span>
              </div>
            {% endif %}

            {% if cv %}
              <div class="contact-item">
                <i class="far fa-newspaper" aria-hidden="true"></i>
                <span>
                  <a href="{{ cv }}" target="_blank">
                    Curriculum Vitae
                    {{cv}}
                  </a>
                </span>
              </div>
            {% endif %}

            {% if image_media %}
              {% image image_media original as high_res %}
              <div class="contact-item">
                <i class="fas fa-download"></i>
                <span>
                  <a href="{{ high_res.url }}" target="_blank">
                  High-resolution Photo
                  </a>
                </span>
              </div>
            {% endif %}
          </div>
        </div>
      {% endif %}

      {% if page.body %}
        <div class="full-bio">
          <h2>Bio</h2>
          {{page.body}}
        </div>
      {% endif %}
    {% endif %}
  </section>

{% endblock content %}
