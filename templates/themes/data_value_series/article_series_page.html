{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags webpack_loader %}

{% block meta_description %}
  {% if self.social_description %}
    <meta name="description" content="{{ self.social_description }}" />
  {% elif self.short_description %}
    <meta name="description" content="{{ self.short_description|striptags }}" />
  {% endif %}
{% endblock %}
{% block og_description %}
  {% if self.social_description %}
    <meta property="og:description" content="{{ self.social_description }}" />
  {% elif self.short_description %}
    <meta property="og:description" content="{{ self.short_description|striptags }}" />
  {% endif %}
{% endblock %}
{% block og_image %}
  {% if self.image_social %}
    {% image self.image_social fill-1600x900 as og_image %}
  {% elif self.image_hero %}
    {% image self.image_hero fill-1600x900 as og_image %}
  {% endif %}
  {% if og_image %}
    <meta property="og:image" content="{{ og_image.url }}" />
  {% else %}
    {% include "includes/og_image_default.html" %}
  {% endif %}
{% endblock %}

{% block theme_css %}
  {% render_bundle 'themeDataValueSeries' 'css' %}
{% endblock %}

{% block body_class %}data-value-series data-value-series-article-series{% endblock %}

{% block header %}
  {% include "includes/top_bar.html" with small=True %}
{% endblock %}

{% block content %}
  <div class="page-header">
    <div class="data-value-series-hero">
      <div class="container">
        {% include "includes/social_links.html" with title=self.title no_circle=True %}
        <h1><span>{{ self.title }}</span></h1>
        <div class="subtitle">{{ self.subtitle|richtext }}</div>
        <ul class="contributors">
          {% for item in self.series_contributors_by_article %}
            {% for contributor in item.contributors %}
              <li>{{ contributor.author.title }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
      <a href="#article-body" class="scroll-arrow">
        <i class="far fa-angle-down" aria-hidden="true"></i>
      </a>
    </div>
  </div>

  <div class="page-content">
    {% include "includes/body.html" with body=self.body heading="About the Series" full_heading=True %}

    <div class="footer-image"></div>
    {% include "./includes/in_the_series.html" with article_series=self title=False %}
  </div>
{% endblock %}
